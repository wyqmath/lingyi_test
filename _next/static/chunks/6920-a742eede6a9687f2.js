"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6920],{23920:(e,t,r)=>{r.d(t,{P:()=>o,V:()=>i});var n=r(70383),a=r(21881),l=r(76920);let i=e=>{let{children:t}=e;return(0,n.jsx)("div",{className:"text-[.65rem] font-semibold mb-1 uppercase text-neutral-500 dark:text-neutral-400 px-1.5",children:t})},o=a.forwardRef(function(e,t){let{children:r,isActive:a,onClick:i,disabled:o,className:s}=e,d=(0,l.cn)("flex items-center gap-2 p-1.5 text-sm font-medium text-neutral-500 dark:text-neutral-400 text-left bg-transparent w-full rounded",!a&&!o,"hover:bg-neutral-100 hover:text-neutral-800 dark:hover:bg-neutral-900 dark:hover:text-neutral-200",a&&!o&&"bg-neutral-100 text-neutral-800 dark:bg-neutral-900 dark:text-neutral-200",o&&"text-neutral-400 cursor-not-allowed dark:text-neutral-600",s);return(0,n.jsx)("button",{className:d,disabled:o,onClick:i,ref:t,children:r})})},16060:(e,t,r)=>{r.d(t,{J:()=>i});var n=r(70383),a=r(76920),l=r(24989);let i=(0,r(21881).memo)(e=>{let{name:t,className:r,strokeWidth:i}=e,o=l[t];return o?(0,n.jsx)(o,{className:(0,a.cn)("w-4 h-4",r),strokeWidth:i||2.5}):null});i.displayName="Icon"},80113:(e,t,r)=>{r.d(t,{T:()=>l});var n=r(70383),a=r(76920);let l=(0,r(21881).forwardRef)((e,t)=>{let{children:r,className:l,withShadow:i=!0,withBorder:o=!0,...s}=e,d=(0,a.cn)(l,"bg-white rounded-lg dark:bg-black",i?"shadow-sm":"",o?"border border-neutral-200 dark:border-neutral-800":"");return(0,n.jsx)("div",{className:d,...s,ref:t,children:r})});l.displayName="Surface"},91542:(e,t,r)=>{r.d(t,{z:()=>l});var n=r(70383),a=r(76920);let l=r(21881).forwardRef((e,t)=>{let{active:r,buttonSize:l="medium",children:i,disabled:o,variant:s="primary",className:d,activeClassname:c,...u}=e,m=(0,a.cn)("flex group items-center justify-center border border-transparent gap-2 text-sm font-semibold rounded-md disabled:opacity-50 whitespace-nowrap","primary"===s&&(0,a.cn)("text-white bg-black border-black dark:text-black dark:bg-white dark:border-white",!o&&!r&&"hover:bg-neutral-800 active:bg-neutral-900 dark:hover:bg-neutral-200 dark:active:bg-neutral-300",r&&(0,a.cn)("bg-neutral-900 dark:bg-neutral-300",c)),"secondary"===s&&(0,a.cn)("text-neutral-900 dark:text-white",!o&&!r&&"hover:bg-neutral-100 active:bg-neutral-200 dark:hover:bg-neutral-900 dark:active:bg-neutral-800",r&&"bg-neutral-200 dark:bg-neutral-800"),"tertiary"===s&&(0,a.cn)("bg-neutral-50 text-neutral-900 dark:bg-neutral-900 dark:text-white dark:border-neutral-900",!o&&!r&&"hover:bg-neutral-100 active:bg-neutral-200 dark:hover:bg-neutral-800 dark:active:bg-neutral-700",r&&(0,a.cn)("bg-neutral-200 dark:bg-neutral-800",c)),"ghost"===s&&(0,a.cn)("bg-transparent border-transparent text-neutral-500 dark:text-neutral-400",!o&&!r&&"hover:bg-black/5 hover:text-neutral-700 active:bg-black/10 active:text-neutral-800 dark:hover:bg-white/10 dark:hover:text-neutral-300 dark:active:text-neutral-200",r&&(0,a.cn)("bg-black/10 text-neutral-800 dark:bg-white/20 dark:text-neutral-200",c)),"medium"===l&&"py-2 px-3","small"===l&&"py-1 px-2","icon"===l&&"w-8 h-8","iconSmall"===l&&"w-6 h-6",d);return(0,n.jsx)("button",{ref:t,disabled:o,className:m,...u,children:i})});l.displayName="Button"},91439:(e,t,r)=>{r.d(t,{U:()=>h});var n=r(66345),a=r(17647),l=r(70383),i=r(21881);let o=e=>{let{onUpload:t}=e,[r,n]=(0,i.useState)(!1);return{loading:r,uploadFile:(0,i.useCallback)(async e=>{n(!0);try{t("abc")}catch(e){var r,a;null==e||null===(a=e.response)||void 0===a||null===(r=a.data)||void 0===r||r.error}n(!1)},[t])}},s=()=>{let e=(0,i.useRef)(null),t=(0,i.useCallback)(()=>{var t;null===(t=e.current)||void 0===t||t.click()},[]);return{ref:e,handleUploadClick:t}},d=e=>{let{uploader:t}=e,[r,n]=(0,i.useState)(!1),[a,l]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{let e=()=>{n(!0)},t=()=>{n(!1)};return document.body.addEventListener("dragstart",e),document.body.addEventListener("dragend",t),()=>{document.body.removeEventListener("dragstart",e),document.body.removeEventListener("dragend",t)}},[]),{isDragging:r,draggedInside:a,onDragEnter:()=>{l(!0)},onDragLeave:()=>{l(!1)},onDrop:(0,i.useCallback)(e=>{if(l(!1),0===e.dataTransfer.files.length)return;let r=e.dataTransfer.files,n=[];for(let e=0;e<r.length;e+=1){let t=r.item(e);t&&n.push(t)}if(n.some(e=>-1===e.type.indexOf("image")))return;e.preventDefault();let a=n.filter(e=>-1!==e.type.indexOf("image")),i=a.length>0?a[0]:void 0;i&&t(i)},[t])}};var c=r(91542),u=r(16060),m=r(76920);let p=e=>{let{onUpload:t}=e,{loading:r,uploadFile:n}=o({onUpload:t}),{handleUploadClick:a,ref:p}=s(),{draggedInside:g,onDrop:h,onDragEnter:f,onDragLeave:b}=d({uploader:n}),v=(0,i.useCallback)(e=>e.target.files?n(e.target.files[0]):null,[n]);if(r)return(0,l.jsx)("div",{className:"flex items-center justify-center p-8 rounded-lg min-h-[10rem] bg-opacity-80",children:"spin"});let y=(0,m.cn)("flex flex-col items-center justify-center px-8 py-10 rounded-lg bg-opacity-80",g&&"bg-neutral-100");return(0,l.jsxs)("div",{className:y,onDrop:h,onDragOver:f,onDragLeave:b,contentEditable:!1,children:[(0,l.jsx)(u.J,{name:"Image",className:"w-12 h-12 mb-4 text-black dark:text-white opacity-20"}),(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2",children:[(0,l.jsx)("div",{className:"text-sm font-medium text-center text-neutral-400 dark:text-neutral-500",children:g?"Drop image here":"Drag and drop or"}),(0,l.jsx)("div",{children:(0,l.jsxs)(c.z,{disabled:g,onClick:a,variant:"primary",buttonSize:"small",children:[(0,l.jsx)(u.J,{name:"Upload"}),"Upload an image"]})})]}),(0,l.jsx)("input",{className:"w-0 h-0 overflow-hidden opacity-0",ref:p,type:"file",accept:".jpg,.jpeg,.png,.webp,.gif",onChange:v})]})},g=e=>{let{getPos:t,editor:r}=e,n=(0,i.useCallback)(e=>{e&&r.chain().setImageBlock({src:e}).deleteRange({from:t(),to:t()}).focus().run()},[t,r]);return(0,l.jsx)(a.T5,{children:(0,l.jsx)("div",{className:"p-0 m-0","data-drag-handle":!0,children:(0,l.jsx)(p,{onUpload:n})})})},h=n.NB.create({name:"imageUpload",isolating:!0,defining:!0,group:"block",draggable:!0,selectable:!0,inline:!1,parseHTML(){return[{tag:'div[data-type="'.concat(this.name,'"]')}]},renderHTML(){return["div",{"data-type":this.name}]},addCommands(){return{setImageUpload:()=>e=>{let{commands:t}=e;return t.insertContent('<div data-type="'.concat(this.name,'"></div>'))}}},addNodeView:()=>(0,a.fW)(g)})},33003:(e,t,r)=>{r.d(t,{X3:()=>n,oe:()=>l});var n,a=r(66345);!function(e){e.SidebarLeft="sidebar-left",e.SidebarRight="sidebar-right",e.TwoColumn="two-column"}(n||(n={}));let l=a.NB.create({name:"columns",group:"columns",content:"column column",defining:!0,isolating:!0,addAttributes:()=>({layout:{default:"two-column"}}),addCommands:()=>({setColumns:()=>e=>{let{commands:t}=e;return t.insertContent('<div data-type="columns"><div data-type="column" data-position="left"><p></p></div><div data-type="column" data-position="right"><p></p></div></div>')},setLayout:e=>t=>{let{commands:r}=t;return r.updateAttributes("columns",{layout:e})}}),renderHTML(e){let{HTMLAttributes:t}=e;return["div",{"data-type":"columns",class:"layout-".concat(t.layout)},0]},parseHTML:()=>[{tag:'div[data-type="columns"]'}]})},52630:(e,t,r)=>{r.d(t,{iA:()=>n,pj:()=>s,xD:()=>c,SC:()=>d});let n=r(10270).ZP.configure({resizable:!0,lastColumnResizable:!1});var a=r(66345),l=r(99463),i=r(95959),o=r(82371);let s=a.NB.create({name:"tableCell",content:"block+",tableRole:"cell",isolating:!0,addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"td"}],renderHTML(e){let{HTMLAttributes:t}=e;return["td",(0,a.P1)(this.options.HTMLAttributes,t),0]},addAttributes:()=>({colspan:{default:1,parseHTML:e=>{let t=e.getAttribute("colspan");return t?parseInt(t,10):1}},rowspan:{default:1,parseHTML:e=>{let t=e.getAttribute("rowspan");return t?parseInt(t,10):1}},colwidth:{default:null,parseHTML:e=>{let t=e.getAttribute("colwidth");return t?[parseInt(t,10)]:null}},style:{default:null}}),addProseMirrorPlugins(){let{isEditable:e}=this.editor;return[new l.Sy({props:{decorations:t=>{if(!e)return i.EH.empty;let{doc:r,selection:n}=t,a=[],l=(0,o.yX)(0)(n);return l&&l.forEach((e,t)=>{let{pos:r}=e;a.push(i.p.widget(r+1,()=>{let e=(0,o.Ax)(t)(n),r="grip-row";e&&(r+=" selected"),0===t&&(r+=" first"),t===l.length-1&&(r+=" last");let a=document.createElement("a");return a.className=r,a.addEventListener("mousedown",e=>{e.preventDefault(),e.stopImmediatePropagation(),this.editor.view.dispatch((0,o.pj)(t)(this.editor.state.tr))}),a}))}),i.EH.create(r,a)}}})]}}),d=r(45017).Z.extend({allowGapCursor:!1,content:"tableCell*"}),c=r(11301).Z.extend({addAttributes:()=>({colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{let t=e.getAttribute("colwidth");return t?t.split(",").map(e=>parseInt(e,10)):null}},style:{default:null}}),addProseMirrorPlugins(){let{isEditable:e}=this.editor;return[new l.Sy({props:{decorations:t=>{if(!e)return i.EH.empty;let{doc:r,selection:n}=t,a=[],l=(0,o.uU)(0)(n);return l&&l.forEach((e,t)=>{let{pos:r}=e;a.push(i.p.widget(r+1,()=>{let e=(0,o.u)(t)(n),r="grip-column";e&&(r+=" selected"),0===t&&(r+=" first"),t===l.length-1&&(r+=" last");let a=document.createElement("a");return a.className=r,a.addEventListener("mousedown",e=>{e.preventDefault(),e.stopImmediatePropagation(),this.editor.view.dispatch((0,o.iH)(t)(this.editor.state.tr))}),a}))}),i.EH.create(r,a)}}})]}})},82371:(e,t,r)=>{r.d(t,{Ax:()=>d,iH:()=>g,pj:()=>h,u:()=>s,u4:()=>c,uU:()=>m,yX:()=>u});var n=r(66345),a=r(2866);let l=e=>t=>{let r=a.rU.get(t.$anchorCell.node(-1)),n=t.$anchorCell.start(-1),l=r.cellsInRect(e),i=r.cellsInRect(r.rectBetween(t.$anchorCell.pos-n,t.$headCell.pos-n));for(let e=0,t=l.length;e<t;e+=1)if(-1===i.indexOf(l[e]))return!1;return!0},i=e=>(0,n.Kk)(e=>e.type.spec.tableRole&&"table"===e.type.spec.tableRole)(e),o=e=>e instanceof a.Xc,s=e=>t=>!!o(t)&&l({left:e,right:e+1,top:0,bottom:a.rU.get(t.$anchorCell.node(-1)).height})(t),d=e=>t=>!!o(t)&&l({left:0,right:a.rU.get(t.$anchorCell.node(-1)).width,top:e,bottom:e+1})(t),c=e=>{if(o(e)){let t=a.rU.get(e.$anchorCell.node(-1));return l({left:0,right:t.width,top:0,bottom:t.height})(e)}return!1},u=e=>t=>{let r=i(t);if(r){let t=a.rU.get(r.node);return(Array.isArray(e)?e:Array.from([e])).reduce((e,n)=>{if(n>=0&&n<=t.width-1){let a=t.cellsInRect({left:n,right:n+1,top:0,bottom:t.height});return e.concat(a.map(e=>{let t=r.node.nodeAt(e),n=e+r.start;return{pos:n,start:n+1,node:t}}))}return e},[])}return null},m=e=>t=>{let r=i(t);if(r){let t=a.rU.get(r.node);return(Array.isArray(e)?e:Array.from([e])).reduce((e,n)=>{if(n>=0&&n<=t.height-1){let a=t.cellsInRect({left:0,right:t.width,top:n,bottom:n+1});return e.concat(a.map(e=>{let t=r.node.nodeAt(e),n=e+r.start;return{pos:n,start:n+1,node:t}}))}return e},[])}return null},p=e=>t=>r=>{let n=i(r.selection),l="row"===e;if(n){let e=a.rU.get(n.node);if(t>=0&&t<(l?e.height:e.width)){let i=l?0:t,o=l?t:0,s=l?e.width:t+1,d=l?t+1:e.height,c=e.cellsInRect({left:i,top:o,right:l?s:i+1,bottom:l?o+1:d}),u=d-o==1?c:e.cellsInRect({left:l?i:s-1,top:l?d-1:o,right:s,bottom:d}),m=n.start+c[0],p=n.start+u[u.length-1],g=r.doc.resolve(m),h=r.doc.resolve(p);return r.setSelection(new a.Xc(h,g))}}return r},g=p("column"),h=p("row")},46127:(e,t,r)=>{r.d(t,{l:()=>c});var n=r(70383),a=r(66345),l=r(17647),i=r(21881),o=r(76920);let s=(0,i.memo)(e=>{let{editor:t,onItemClick:r}=e,a=(0,l.sZ)({editor:t,selector:e=>e.editor.storage.tableOfContents.content});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"mb-2 text-xs font-semibold uppercase text-neutral-500 dark:text-neutral-400",children:"Table of contents"}),a.length>0?(0,n.jsx)("div",{className:"flex flex-col gap-1",children:a.map(e=>(0,n.jsxs)("a",{href:"#".concat(e.id),style:{marginLeft:"".concat(1*e.level-1,"rem")},onClick:r,className:(0,o.cn)("block font-medium text-neutral-500 dark:text-neutral-300 p-1 rounded bg-opacity-10 text-sm hover:text-neutral-800 transition-all hover:bg-black hover:bg-opacity-5 truncate w-full",e.isActive&&"text-neutral-800 bg-neutral-100 dark:text-neutral-100 dark:bg-neutral-900"),children:[e.itemIndex,". ",e.textContent]},e.id))}):(0,n.jsx)("div",{className:"text-sm text-neutral-500",children:"Start adding headlines to your document …"})]})});s.displayName="TableOfContents";let d=e=>{let{editor:t}=e;return(0,n.jsx)(l.T5,{children:(0,n.jsx)("div",{className:"p-2 -m-2 rounded-lg",contentEditable:!1,children:(0,n.jsx)(s,{editor:t})})})},c=a.NB.create({name:"tableOfContentsNode",group:"block",atom:!0,selectable:!0,draggable:!0,inline:!1,parseHTML:()=>[{tag:'div[data-type="table-of-content"]'}],renderHTML(e){let{HTMLAttributes:t}=e;return["div",{...t,"data-type":"table-of-content"}]},addNodeView:()=>(0,l.fW)(d),addCommands(){return{insertTableOfContents:()=>e=>{let{commands:t}=e;return t.insertContent({type:this.name})}}}})},17598:(e,t,r)=>{let n;r.d(t,{f5:()=>E,sU:()=>S,wK:()=>es,Ht:()=>i.H,dn:()=>$,Il:()=>g.I,sg:()=>eh,oe:()=>eg.oe,PO:()=>H.P,dY:()=>L.d,vx:()=>C.v,BB:()=>q,m$:()=>f.m,dy:()=>d.dy,ty:()=>el,Xx:()=>k.Xx,TO:()=>h.F,bt:()=>m.b,Bf:()=>er,X6:()=>P,y$:()=>l.y$,bo:()=>I,r8:()=>ep,Ur:()=>ec.U,rU:()=>ed,Vm:()=>s.V,Y1:()=>j,vb:()=>et,Vg:()=>a.V,ar:()=>b.a,$2:()=>y.$,iA:()=>B.iA,pj:()=>B.pj,xD:()=>B.xD,o5:()=>v.o5,SC:()=>B.SC,Uf:()=>x.Uf,ax:()=>w.a,PH:()=>c.P,pn:()=>u.p,eh:()=>K,ZT:()=>p.ZT,v6:()=>o.v,H$:()=>T.H,pE:()=>eb});var a=r(15930),l=r(29926),i=r(70942),o=r(79171),s=r(94175),d=r(6631),c=r(59761),u=r(26898),m=r(36323),p=r(77520),g=r(8918),h=r(30694),f=r(91626);r(10730);var b=r(65192),v=r(54801),y=r(60015);r(28858),r(39863),r(71850),r(65504);var x=r(51003),w=r(50518),k=r(90094),H=r(92773),L=r(47899),C=r(77651),T=r(6561),A=r(66345),M=r(99463),N=r(95959);let j=A.hj.create({name:"selection",addProseMirrorPlugins(){let{editor:e}=this;return[new M.Sy({key:new M.H$("selection"),props:{decorations:t=>t.selection.empty||!0===e.isFocused?null:N.EH.create(t.doc,[N.p.inline(t.selection.from,t.selection.to,{class:"selection"})])}})]}}),S=A.hj.create({name:"aiWriterFree"}),E=A.hj.create({name:"aiImageFree"});var B=r(52630);let I=r(96498).Z.extend({renderHTML(){return["div",(0,A.P1)(this.options.HTMLAttributes,{"data-type":this.name}),["hr"]]}}),P=r(86307).Z.extend({renderHTML(e){let{node:t,HTMLAttributes:r}=e,n=parseInt(t.attrs.level,10),a=this.options.levels.includes(n)?n:this.options.levels[0];return["h".concat(a),(0,A.P1)(this.options.HTMLAttributes,r),0]}});var R=r(95014),O=r(67476),D=r(90915);let U=(0,O.B)(D.y),$=R.H.configure({lowlight:U,defaultLanguage:"javascript"}),q=r(18849).B.extend({content:"(block|columns)+"});function z(e){let{types:t,node:r}=e;return Array.isArray(t)&&t.includes(r.type)||r.type===t}let K=A.hj.create({name:"trailingNode",addOptions:()=>({node:"paragraph",notAfter:["paragraph"]}),addProseMirrorPlugins(){let e=new M.H$(this.name),t=Object.entries(this.editor.schema.nodes).map(e=>{let[,t]=e;return t}).filter(e=>this.options.notAfter.includes(e.name));return[new M.Sy({key:e,appendTransaction:(t,r,n)=>{let{doc:a,tr:l,schema:i}=n,o=e.getState(n),s=a.content.size,d=i.nodes[this.options.node];if(o)return l.insert(s,d.create())},state:{init:(e,r)=>!z({node:r.tr.doc.lastChild,types:t}),apply:(e,r)=>e.docChanged?!z({node:e.doc.lastChild,types:t}):r}})]}});var W=r(17647),Z=r(76254),F=r(36293);let V=[{name:"ai",title:"AI",commands:[{name:"aiWriter",label:"AI Writer",iconName:"Sparkles",description:"Let AI finish your thoughts",shouldBeHidden:e=>e.isActive("columns"),action:e=>e.chain().focus().setAiWriter().run()},{name:"aiImage",label:"AI Image",iconName:"Sparkles",description:"Generate an image from text",shouldBeHidden:e=>e.isActive("columns"),action:e=>e.chain().focus().setAiImage().run()}]},{name:"format",title:"Format",commands:[{name:"heading1",label:"Heading 1",iconName:"Heading1",description:"High priority section title",aliases:["h1"],action:e=>{e.chain().focus().setHeading({level:1}).run()}},{name:"heading2",label:"Heading 2",iconName:"Heading2",description:"Medium priority section title",aliases:["h2"],action:e=>{e.chain().focus().setHeading({level:2}).run()}},{name:"heading3",label:"Heading 3",iconName:"Heading3",description:"Low priority section title",aliases:["h3"],action:e=>{e.chain().focus().setHeading({level:3}).run()}},{name:"bulletList",label:"Bullet List",iconName:"List",description:"Unordered list of items",aliases:["ul"],action:e=>{e.chain().focus().toggleBulletList().run()}},{name:"numberedList",label:"Numbered List",iconName:"ListOrdered",description:"Ordered list of items",aliases:["ol"],action:e=>{e.chain().focus().toggleOrderedList().run()}},{name:"taskList",label:"Task List",iconName:"ListTodo",description:"Task list with todo items",aliases:["todo"],action:e=>{e.chain().focus().toggleTaskList().run()}},{name:"toggleList",label:"Toggle List",iconName:"ListCollapse",description:"Toggles can show and hide content",aliases:["toggle"],action:e=>{e.chain().focus().setDetails().run()}},{name:"blockquote",label:"Blockquote",iconName:"Quote",description:"Element for quoting",action:e=>{e.chain().focus().setBlockquote().run()}},{name:"codeBlock",label:"Code Block",iconName:"SquareCode",description:"Code block with syntax highlighting",shouldBeHidden:e=>e.isActive("columns"),action:e=>{e.chain().focus().setCodeBlock().run()}}]},{name:"insert",title:"Insert",commands:[{name:"table",label:"Table",iconName:"Table",description:"Insert a table",shouldBeHidden:e=>e.isActive("columns"),action:e=>{e.chain().focus().insertTable({rows:3,cols:3,withHeaderRow:!1}).run()}},{name:"image",label:"Image",iconName:"Image",description:"Insert an image",aliases:["img"],action:e=>{e.chain().focus().setImageUpload().run()}},{name:"columns",label:"Columns",iconName:"Columns2",description:"Add two column content",aliases:["cols"],shouldBeHidden:e=>e.isActive("columns"),action:e=>{e.chain().focus().setColumns().focus(e.state.selection.head-1).run()}},{name:"horizontalRule",label:"Horizontal Rule",iconName:"Minus",description:"Insert a horizontal divider",aliases:["hr"],action:e=>{e.chain().focus().setHorizontalRule().run()}},{name:"toc",label:"Table of Contents",iconName:"Book",aliases:["outline"],description:"Insert a table of contents",shouldBeHidden:e=>e.isActive("columns"),action:e=>{e.chain().focus().insertTableOfContents().run()}}]}];var X=r(70383),_=r(21881),J=r(80113),G=r(23920),Y=r(16060);let Q=_.forwardRef((e,t)=>{let r=(0,_.useRef)(null),n=(0,_.useRef)(null),[a,l]=(0,_.useState)(0),[i,o]=(0,_.useState)(0);(0,_.useEffect)(()=>{l(0),o(0)},[e.items]);let s=(0,_.useCallback)((t,r)=>{let n=e.items[t].commands[r];e.command(n)},[e]);_.useImperativeHandle(t,()=>({onKeyDown:t=>{let{event:r}=t;if("ArrowDown"===r.key){if(!e.items.length)return!1;let t=e.items[a].commands,r=i+1,n=a;return t.length-1<r&&(r=0,n=a+1),e.items.length-1<n&&(n=0),o(r),l(n),!0}if("ArrowUp"===r.key){if(!e.items.length)return!1;let t=i-1,r=a;if(t<0){var n;r=a-1,t=(null===(n=e.items[r])||void 0===n?void 0:n.commands.length)-1||0}return r<0&&(r=e.items.length-1,t=e.items[r].commands.length-1),o(t),l(r),!0}return"Enter"===r.key&&!!e.items.length&&-1!==a&&-1!==i&&(s(a,i),!0)}})),(0,_.useEffect)(()=>{if(n.current&&r.current){let e=n.current.offsetTop,t=n.current.offsetHeight;r.current.scrollTop=e-t}},[i,a]);let d=(0,_.useCallback)((e,t)=>()=>{s(e,t)},[s]);return e.items.length?(0,X.jsx)(J.T,{ref:r,className:"text-black max-h-[min(80vh,24rem)] overflow-auto flex-wrap mb-8 p-2",children:(0,X.jsx)("div",{className:"grid grid-cols-1 gap-0.5",children:e.items.map((e,t)=>(0,X.jsxs)(_.Fragment,{children:[(0,X.jsx)("div",{className:"text-neutral-500 text-[0.65rem] col-[1/-1] mx-2 mt-4 font-semibold tracking-wider select-none uppercase first:mt-0.5",children:e.title},"".concat(e.title)),e.commands.map((e,r)=>(0,X.jsxs)(G.P,{ref:a===t&&i===r?n:null,isActive:a===t&&i===r,onClick:d(t,r),children:[(0,X.jsx)(Y.J,{name:e.iconName,className:"mr-1"}),e.label]},"".concat(e.label)))]},"".concat(e.title,"-wrapper")))})}):null});Q.displayName="MenuList";let ee="slashCommand",et=A.hj.create({name:ee,priority:200,onCreate(){n=(0,F.ZP)("body",{interactive:!0,trigger:"manual",placement:"bottom-start",theme:"slash-command",maxWidth:"16rem",offset:[16,8],popperOptions:{strategy:"fixed",modifiers:[{name:"flip",enabled:!1}]}})},addProseMirrorPlugins(){return[(0,Z.ZP)({editor:this.editor,char:"/",allowSpaces:!0,startOfLine:!0,pluginKey:new M.H$(ee),allow:e=>{var t,r,n;let{state:a,range:l}=e,i=a.doc.resolve(l.from),o=1===i.depth,s="paragraph"===i.parent.type.name,d=(null===(t=i.parent.textContent)||void 0===t?void 0:t.charAt(0))==="/",c=this.editor.isActive("column"),u=null===(n=i.parent.textContent)||void 0===n?void 0:n.substring(null===(r=i.parent.textContent)||void 0===r?void 0:r.indexOf("/")),m=!(null==u?void 0:u.endsWith("  "));return(o&&s&&d||c&&s&&d)&&m},command:e=>{var t,r,n;let{editor:a,props:l}=e,{view:i,state:o}=a,{$head:s,$from:d}=i.state.selection,c=d.pos,u=(null==s?void 0:s.nodeBefore)?c-(null!==(n=null===(r=s.nodeBefore.text)||void 0===r?void 0:r.substring(null===(t=s.nodeBefore.text)||void 0===t?void 0:t.indexOf("/")).length)&&void 0!==n?n:0):d.start(),m=o.tr.deleteRange(u,c);i.dispatch(m),l.action(a),i.focus()},items:e=>{let{query:t}=e;return V.map(e=>({...e,commands:e.commands.filter(e=>{let r=e.label.toLowerCase().trim(),n=t.toLowerCase().trim();if(e.aliases){let t=e.aliases.map(e=>e.toLowerCase().trim());return r.includes(n)||t.includes(n)}return r.includes(n)}).filter(e=>!e.shouldBeHidden||!e.shouldBeHidden(this.editor))})).filter(e=>e.commands.length>0).map(e=>({...e,commands:e.commands.map(e=>({...e,isEnabled:!0}))}))},render:()=>{let e;let t=null;return{onStart:r=>{var a;e=new W.M_(Q,{props:r,editor:r.editor});let{view:l}=r.editor,i=l.dom,o=()=>{if(!r.clientRect)return r.editor.storage[ee].rect;let t=r.clientRect();if(!t)return r.editor.storage[ee].rect;let n=t.y;if(t.top+e.element.offsetHeight+40>window.innerHeight){let r=t.top+e.element.offsetHeight-window.innerHeight+40;n=t.y-r}return i.getBoundingClientRect().x,new DOMRect(t.x,n,t.width,t.height)};t=()=>{null==n||n[0].setProps({getReferenceClientRect:o})},null===(a=l.dom.parentElement)||void 0===a||a.addEventListener("scroll",t),null==n||n[0].setProps({getReferenceClientRect:o,appendTo:()=>document.body,content:e.element}),null==n||n[0].show()},onUpdate(t){var r;e.updateProps(t);let{view:a}=t.editor;a.dom;let l=()=>{if(!t.clientRect)return t.editor.storage[ee].rect;let e=t.clientRect();return e?new DOMRect(e.x,e.y,e.width,e.height):t.editor.storage[ee].rect};null===(r=a.dom.parentElement)||void 0===r||r.addEventListener("scroll",()=>{null==n||n[0].setProps({getReferenceClientRect:l})}),t.editor.storage[ee].rect=t.clientRect?l():{width:0,height:0,left:0,top:0,right:0,bottom:0},null==n||n[0].setProps({getReferenceClientRect:l})},onKeyDown(t){var r;return"Escape"===t.event.key?(null==n||n[0].hide(),!0):((null==n?void 0:n[0].state.isShown)||null==n||n[0].show(),null===(r=e.ref)||void 0===r?void 0:r.onKeyDown(t))},onExit(r){if(null==n||n[0].hide(),t){var a;let{view:e}=r.editor;null===(a=e.dom.parentElement)||void 0===a||a.removeEventListener("scroll",t)}e.destroy()}}}})]},addStorage:()=>({rect:{width:0,height:0,left:0,top:0,right:0,bottom:0}})}),er=A.hj.create({name:"fontSize",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:["paragraph"],attributes:{class:{}}},{types:this.options.types,attributes:{fontSize:{parseHTML:e=>e.style.fontSize.replace(/['"]+/g,""),renderHTML:e=>e.fontSize?{style:"font-size: ".concat(e.fontSize)}:{}}}}]},addCommands:()=>({setFontSize:e=>t=>{let{chain:r}=t;return r().setMark("textStyle",{fontSize:e}).run()},unsetFontSize:()=>e=>{let{chain:t}=e;return t().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}})}),en=A.NB.create({name:"figure",addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"block figcaption",draggable:!0,defining:!0,selectable:!0,parseHTML(){return[{tag:'figure[data-type="'.concat(this.name,'"]')}]},renderHTML(e){let{HTMLAttributes:t}=e;return["figure",(0,A.P1)(t,{"data-type":this.name}),0]},addProseMirrorPlugins(){return[new M.Sy({props:{handleDOMEvents:{dragstart:(e,t)=>{if(!t.target)return!1;let r=e.posAtDOM(t.target,0);return e.state.doc.resolve(r).parent.type.name===this.type.name&&t.preventDefault(),!1}}}})]}}),ea=r(31998).Ee.extend({group:"block"}),el=A.NB.create({name:"figcaption",addOptions:()=>({HTMLAttributes:{}}),content:"inline*",selectable:!1,draggable:!1,marks:"link",parseHTML:()=>[{tag:"figcaption"}],addKeyboardShortcuts(){return{Enter:e=>{let{editor:t}=e,{state:{selection:{$from:r,empty:n}}}=t;if(!n||r.parent.type!==this.type||r.parentOffset!==r.parent.nodeSize-2)return!1;let a=t.state.selection.$from.end();return t.chain().focus(a).insertContentAt(a,{type:"paragraph"}).run()},Backspace:e=>{let{editor:t}=e,{state:{selection:{$from:r,empty:n}}}=t;if(!n||r.parent.type!==this.type||0!==r.parentOffset)return!1;let a=t.state.doc.nodeAt(r.pos-2);return(null==a?void 0:a.type.name)===ea.name}}},renderHTML(e){let{HTMLAttributes:t}=e;return["figcaption",(0,A.P1)(t),0]}}),ei=A.NB.create({name:"quote",content:"paragraph+",defining:!0,marks:"",parseHTML:()=>[{tag:"blockquote"}],renderHTML(e){let{HTMLAttributes:t}=e;return["blockquote",t,0]},addKeyboardShortcuts:()=>({Backspace:()=>!1})}),eo=A.NB.create({name:"quoteCaption",group:"block",content:"text*",defining:!0,isolating:!0,parseHTML:()=>[{tag:"figcaption"}],renderHTML(e){let{HTMLAttributes:t}=e;return["figcaption",t,0]},addKeyboardShortcuts(){return{Enter:e=>{let{editor:t}=e,{state:{selection:{$from:r,empty:n}}}=t;if(!n||r.parent.type!==this.type||r.parentOffset!==r.parent.nodeSize-2)return!1;let a=t.state.selection.$from.end();return t.chain().focus(a).insertContentAt(a,{type:"paragraph"}).run()}}}}),es=en.extend({name:"blockquoteFigure",group:"block",content:"quote quoteCaption",isolating:!0,addExtensions:()=>[ei,eo],renderHTML(e){let{HTMLAttributes:t}=e;return["figure",(0,A.P1)(t,{"data-type":this.name}),["div",{},0]]},addKeyboardShortcuts:()=>({Enter:()=>!1}),addAttributes(){var e;return{...null===(e=this.parent)||void 0===e?void 0:e.call(this)}},addCommands(){return{setBlockquote:()=>e=>{let{state:t,chain:r}=e,n=t.selection.$from.start(),a=t.selection.content();return r().focus().insertContent({type:this.name,content:[{type:"quote",content:a.content.toJSON()||[{type:"paragraph",attrs:{textAlign:"left"}}]},{type:"quoteCaption"}]}).focus(n+1).run()}}}}),ed=r(24598).ZP.extend({inclusive:!1,parseHTML:()=>[{tag:'a[href]:not([data-type="button"]):not([href *= "javascript:" i])'}],renderHTML(e){let{HTMLAttributes:t}=e;return["a",(0,A.P1)(this.options.HTMLAttributes,t,{class:"link"}),0]},addProseMirrorPlugins(){var e;let{editor:t}=this;return[...(null===(e=this.parent)||void 0===e?void 0:e.call(this))||[],new M.Sy({props:{handleKeyDown:(e,r)=>{let{selection:n}=t.state;return"Escape"===r.key&&!0!==n.empty&&t.commands.focus(n.to,{scrollIntoView:!1}),!1}}})]}});var ec=r(91439),eu=r(76920);let em=e=>{let{editor:t,getPos:r,node:n}=e,a=(0,_.useRef)(null),{src:l}=n.attrs,i=(0,eu.cn)("left"===n.attrs.align?"ml-0":"ml-auto","right"===n.attrs.align?"mr-0":"mr-auto","center"===n.attrs.align&&"mx-auto"),o=(0,_.useCallback)(()=>{t.commands.setNodeSelection(r())},[r,t.commands]);return(0,X.jsx)(W.T5,{children:(0,X.jsx)("div",{className:i,style:{width:n.attrs.width},children:(0,X.jsx)("div",{contentEditable:!1,ref:a,children:(0,X.jsx)("img",{className:"block",src:l,alt:"",onClick:o})})})})},ep=ea.extend({name:"imageBlock",group:"block",defining:!0,isolating:!0,addAttributes:()=>({src:{default:"",parseHTML:e=>e.getAttribute("src"),renderHTML:e=>({src:e.src})},width:{default:"100%",parseHTML:e=>e.getAttribute("data-width"),renderHTML:e=>({"data-width":e.width})},align:{default:"center",parseHTML:e=>e.getAttribute("data-align"),renderHTML:e=>({"data-align":e.align})},alt:{default:void 0,parseHTML:e=>e.getAttribute("alt"),renderHTML:e=>({alt:e.alt})}}),parseHTML:()=>[{tag:'img[src*="tiptap.dev"]:not([src^="data:"]), img[src*="windows.net"]:not([src^="data:"])'}],renderHTML(e){let{HTMLAttributes:t}=e;return["img",(0,A.P1)(this.options.HTMLAttributes,t)]},addCommands:()=>({setImageBlock:e=>t=>{let{commands:r}=t;return r.insertContent({type:"imageBlock",attrs:{src:e.src}})},setImageBlockAt:e=>t=>{let{commands:r}=t;return r.insertContentAt(e.pos,{type:"imageBlock",attrs:{src:e.src}})},setImageBlockAlign:e=>t=>{let{commands:r}=t;return r.updateAttributes("imageBlock",{align:e})},setImageBlockWidth:e=>t=>{let{commands:r}=t;return r.updateAttributes("imageBlock",{width:"".concat(Math.max(0,Math.min(100,e)),"%")})}}),addNodeView:()=>(0,W.fW)(em)});var eg=r(33003);let eh=A.NB.create({name:"column",content:"block+",isolating:!0,addAttributes:()=>({position:{default:"",parseHTML:e=>e.getAttribute("data-position"),renderHTML:e=>({"data-position":e.position})}}),renderHTML(e){let{HTMLAttributes:t}=e;return["div",(0,A.P1)(t,{"data-type":"column"}),0]},parseHTML:()=>[{tag:'div[data-type="column"]'}]}),ef=(0,_.forwardRef)((e,t)=>{let[r,n]=(0,_.useState)(0);(0,_.useEffect)(()=>n(0),[e.items]);let a=(0,_.useCallback)(t=>{let r=e.items[t];r&&e.command({name:r.name})},[e]);return(0,_.useImperativeHandle)(t,()=>{let t=t=>{let r=e.items[t];if(r){let e=document.querySelector('[data-emoji-name="'.concat(r.name,'"]'));e&&e.scrollIntoView({block:"nearest"})}},l=()=>{let a=(r+e.items.length-1)%e.items.length;n(a),t(a)},i=()=>{let a=(r+1)%e.items.length;n(a),t(a)},o=()=>{a(r)};return{onKeyDown:e=>{let{event:t}=e;return"ArrowUp"===t.key?(l(),!0):"ArrowDown"===t.key?(i(),!0):"Enter"===t.key&&(o(),!0)}}},[e,r,a]),(0,_.useCallback)(e=>()=>a(e),[a]),e.items&&e.items.length,null});ef.displayName="EmojiList";let eb={items:e=>{let{editor:t,query:r}=e;return t.storage.emoji.emojis.filter(e=>{let{shortcodes:t,tags:n}=e;return t.find(e=>e.startsWith(r.toLowerCase()))||n.find(e=>e.startsWith(r.toLowerCase()))}).slice(0,250)},allowSpaces:!1,render:()=>{let e,t;return{onStart:r=>{e=new W.M_(ef,{props:r,editor:r.editor}),t=(0,F.ZP)("body",{getReferenceClientRect:r.clientRect,appendTo:()=>document.body,content:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"bottom-start"})},onUpdate(r){e.updateProps(r),t[0].setProps({getReferenceClientRect:r.clientRect})},onKeyDown(r){var n,a;return"Escape"===r.event.key?(t[0].hide(),e.destroy(),!0):null!==(a=null===(n=e.ref)||void 0===n?void 0:n.onKeyDown(r))&&void 0!==a&&a},onExit(){t[0].destroy(),e.destroy()}}}}},87891:(e,t,r)=>{r.d(t,{$:()=>n});let n=(e,t)=>{let{view:r,state:{selection:{from:n}}}=e,a=document.querySelectorAll(".has-focus"),l=a.length,i=a[l-1];if(i&&i.getAttribute("data-type")&&i.getAttribute("data-type")===t||i&&i.classList&&i.classList.contains(t))return i;let o=r.domAtPos(n).node,s=o;for(s.tagName||(s=o.parentElement);s&&!(s.getAttribute("data-type")&&s.getAttribute("data-type")===t)&&!s.classList.contains(t);)s=s.parentElement;return s}},76920:(e,t,r)=>{r.d(t,{cn:()=>m,$X:()=>l.$,vB:()=>d,Ip:()=>u,$G:()=>p});var n=r(74698),a=r(49761);r(87425);var l=r(87891),i=r(17598),o=r(46127);let s=e=>{let t=e;for(;t&&!["TD","TH"].includes(t.tagName);)t=t.parentElement;let r=t&&t.querySelector&&t.querySelector("a.grip-column.selected"),n=t&&t.querySelector&&t.querySelector("a.grip-row.selected");return!!r||!!n},d=(e,t)=>[i.bo.name,i.r8.name,i.Ur.name,i.dn.name,i.r8.name,i.rU.name,i.sU.name,i.f5.name,i.ty.name,o.l.name].some(t=>e.isActive(t))||s(t);var c=r(66345);let u=e=>{let{editor:t}=e,{state:{doc:r,selection:n,selection:{empty:a,from:l,to:i}}}=t,o=!r.textBetween(l,i).length&&(0,c.xh)(n);return!a&&!o&&!!t.isEditable};function m(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}let p=(e,t)=>e.length>t?e.slice(0,t)+"...":e}}]);